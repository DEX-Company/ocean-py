

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Squid Agent class &mdash; starfish-py 0.6.0 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Remote Agent class" href="remote_agent.html" />
    <link rel="prev" title="Memory Agent class" href="memory_agent.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> starfish-py
          

          
          </a>

          
            
            
              <div class="version">
                0.6.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../agents.html">Starfish Agents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../register_asset_squid.html">Register asset using Squid</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../register_asset_remote_agent.html">Register asset on a remote agent</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../modules/starfish.html">starfish_py module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ocean.html">Ocean class</a></li>
<li class="toctree-l1"><a class="reference internal" href="../account.html">Account class</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../agent.html">Agent Classes</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="agent_base.html">Agent Base class</a></li>
<li class="toctree-l2"><a class="reference internal" href="invoke_agent.html">Invoke Agent class</a></li>
<li class="toctree-l2"><a class="reference internal" href="memory_agent.html">Memory Agent class</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Squid Agent class</a></li>
<li class="toctree-l2"><a class="reference internal" href="remote_agent.html">Remote Agent class</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../asset.html">Asset Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../listing.html">Listing Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../purchase.html">Purchase Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../job.html">Job Classes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">starfish-py</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../agent.html">Agent Classes</a> &raquo;</li>
        
      <li>Squid Agent class</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/classes/agent/squid_agent.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="squid-agent-class">
<h1>Squid Agent class<a class="headerlink" href="#squid-agent-class" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="starfish.agent.SquidAgent">
<em class="property">class </em><code class="sig-prename descclassname">starfish.agent.</code><code class="sig-name descname">SquidAgent</code><span class="sig-paren">(</span><em class="sig-param">ocean</em>, <em class="sig-param">*args</em>, <em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#starfish.agent.SquidAgent" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">starfish.agent.agent_base.AgentBase</span></code></p>
<p>Squid Agent class allows to register and list asset listings.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ocean</strong> (<a class="reference internal" href="../ocean.html#starfish.Ocean" title="starfish.Ocean"><code class="xref py py-class docutils literal notranslate"><span class="pre">Ocean</span></code></a>) – Ocean object that is being used.</p></li>
<li><p><strong>aquarius_url</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – Aquarius url ( <a class="reference external" href="http://localhost:5000">http://localhost:5000</a> ).</p></li>
<li><p><strong>brizo_url</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – Brizo url (<a class="reference external" href="http://localhost:8030">http://localhost:8030</a>).</p></li>
<li><p><strong>secret_store_url</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – Secret store URL (<a class="reference external" href="http://localhost:8010">http://localhost:8010</a>).</p></li>
<li><p><strong>parity_url</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – Parity URL, if you are using the secret store (<a class="reference external" href="http://localhost:9545">http://localhost:9545</a>’).</p></li>
<li><p><strong>storage_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – Path to the storage db (squid_py.db).</p></li>
</ul>
</dd>
</dl>
<p>Example how to use this agent:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># First import the classes</span>
<span class="kn">from</span> <span class="nn">starfish.agent</span> <span class="kn">import</span> <span class="n">SquidAgent</span>
<span class="kn">from</span> <span class="nn">starfish</span> <span class="kn">import</span> <span class="n">Ocean</span>
<span class="kn">from</span> <span class="nn">starfish.asset</span> <span class="kn">import</span> <span class="n">RemoteDataAsset</span>

<span class="c1"># create the ocean object</span>
<span class="n">ocean</span> <span class="o">=</span> <span class="n">Ocean</span><span class="p">()</span>

<span class="c1"># get your publisher account</span>
<span class="n">account</span> <span class="o">=</span> <span class="n">ocean</span><span class="o">.</span><span class="n">load_account</span><span class="p">(</span><span class="s1">&#39;0x00bd138abd70e2f00903268f3db08f2d25677c9e&#39;</span><span class="p">)</span>

<span class="c1">#create the SquidAgent</span>
<span class="n">my_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;aquarius_url&#39;</span><span class="p">:</span> <span class="s1">&#39;http://localhost:5000&#39;</span><span class="p">,</span>
    <span class="s1">&#39;brizo_url&#39;</span><span class="p">:</span> <span class="s1">&#39;http://localhost:8030&#39;</span><span class="p">,</span>
    <span class="s1">&#39;secret_store_url&#39;</span><span class="p">:</span> <span class="s1">&#39;http://localhost:12001&#39;</span><span class="p">,</span>
    <span class="s1">&#39;parity_url&#39;</span><span class="p">:</span> <span class="s1">&#39;http://localhost:9545&#39;</span><span class="p">,</span>
    <span class="s1">&#39;storage_path&#39;</span><span class="p">:</span> <span class="s1">&#39;squid_py.db&#39;</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">agent</span> <span class="o">=</span> <span class="n">SquidAgent</span><span class="p">(</span><span class="n">ocean</span><span class="p">,</span> <span class="n">my_config</span><span class="p">)</span>

<span class="n">asset</span> <span class="o">=</span> <span class="n">RemoteDataAsset</span><span class="o">.</span><span class="n">create_with_url</span><span class="p">(</span><span class="s1">&#39;MyAsset&#39;</span><span class="p">,</span> <span class="s1">&#39;http://my_asset_url.com&#39;</span><span class="p">)</span>
<span class="c1"># register an asset data and listing info</span>
<span class="n">listing</span> <span class="o">=</span> <span class="n">agent</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">asset</span><span class="p">,</span> <span class="n">account</span><span class="p">)</span>
</pre></div>
</div>
<dl class="method">
<dt id="starfish.agent.SquidAgent.agent_adapter">
<em class="property">property </em><code class="sig-name descname">agent_adapter</code><a class="headerlink" href="#starfish.agent.SquidAgent.agent_adapter" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an instance of the squid ageent adapter, for access to the squid library layer
:return: squid Agent Adapter object</p>
</dd></dl>

<dl class="method">
<dt id="starfish.agent.SquidAgent.consume_asset">
<code class="sig-name descname">consume_asset</code><span class="sig-paren">(</span><em class="sig-param">listing</em>, <em class="sig-param">account</em>, <em class="sig-param">purchase_id</em><span class="sig-paren">)</span><a class="headerlink" href="#starfish.agent.SquidAgent.consume_asset" title="Permalink to this definition">¶</a></dt>
<dd><p>Consume the asset and download the data. The actual payment to the asset
provider will be made at this point.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>listing</strong> (<a class="reference internal" href="../listing/listing.html#starfish.listing.Listing" title="starfish.listing.Listing"><code class="xref py py-class docutils literal notranslate"><span class="pre">Listing</span></code></a>) – Listing that was used to make the purchase.</p></li>
<li><p><strong>purchase_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – purchase id that was used to purchase the asset.</p></li>
<li><p><strong>account</strong> (<a class="reference internal" href="../account.html#starfish.account.Account" title="starfish.account.Account"><code class="xref py py-class docutils literal notranslate"><span class="pre">Account</span></code></a> object to use for registration.) – Ocean account that was used to purchase the asset.</p></li>
<li><p><strong>download_path</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – path to store the asset data.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>BunleAsset object if you have purchased this asset, which contains one or more RemoteAssets</p>
</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="../asset/bundle_asset.html#starfish.asset.BundleAsset" title="starfish.asset.BundleAsset"><code class="xref py py-class docutils literal notranslate"><span class="pre">BundleAsset</span></code></a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="starfish.agent.SquidAgent.create_data_asset_from_file_item">
<em class="property">static </em><code class="sig-name descname">create_data_asset_from_file_item</code><span class="sig-paren">(</span><em class="sig-param">index</em>, <em class="sig-param">file_item</em>, <em class="sig-param">did</em><span class="sig-paren">)</span><a class="headerlink" href="#starfish.agent.SquidAgent.create_data_asset_from_file_item" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="starfish.agent.SquidAgent.get_asset_purchase_ids">
<code class="sig-name descname">get_asset_purchase_ids</code><span class="sig-paren">(</span><em class="sig-param">asset</em><span class="sig-paren">)</span><a class="headerlink" href="#starfish.agent.SquidAgent.get_asset_purchase_ids" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns as list of purchase id’s that have been used for this asset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>asset</strong> (<a class="reference internal" href="../asset/data_asset.html#starfish.asset.DataAsset" title="starfish.asset.DataAsset"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataAsset</span></code></a> or <a class="reference internal" href="../asset/bundle_asset.html#starfish.asset.BundleAsset" title="starfish.asset.BundleAsset"><code class="xref py py-class docutils literal notranslate"><span class="pre">BundleAsset</span></code></a> object) – Asset to return purchase details.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>list of purchase ids</p>
</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#list" title="(in Python v3.8)">list</a></p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="starfish.agent.SquidAgent.get_listing">
<code class="sig-name descname">get_listing</code><span class="sig-paren">(</span><em class="sig-param">listing_id</em><span class="sig-paren">)</span><a class="headerlink" href="#starfish.agent.SquidAgent.get_listing" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an listing from the given listing_id.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>listing_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Id of the listing.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a registered listing given a Id of the listing</p>
</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="../listing/listing.html#starfish.listing.Listing" title="starfish.listing.Listing"><code class="xref py py-class docutils literal notranslate"><span class="pre">Listing</span></code></a> class</p>
</dd>
<dt class="field-even">Raise</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">StarfishAssetNotFound</span></code> if the asset is not found in
aquarius or the DID of the asset is not on the network ( Block chain )</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="starfish.agent.SquidAgent.invoke_operation">
<em class="property">static </em><code class="sig-name descname">invoke_operation</code><span class="sig-paren">(</span><em class="sig-param">listing</em>, <em class="sig-param">account</em>, <em class="sig-param">purchase_id</em>, <em class="sig-param">payload</em><span class="sig-paren">)</span><a class="headerlink" href="#starfish.agent.SquidAgent.invoke_operation" title="Permalink to this definition">¶</a></dt>
<dd><p>Invoke the operation</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>listing</strong> (<a class="reference internal" href="../listing/listing.html#starfish.listing.Listing" title="starfish.listing.Listing"><code class="xref py py-class docutils literal notranslate"><span class="pre">Listing</span></code></a>) – Listing that was used to make the purchase.</p></li>
<li><p><strong>account</strong> (<a class="reference internal" href="../account.html#starfish.account.Account" title="starfish.account.Account"><code class="xref py py-class docutils literal notranslate"><span class="pre">Account</span></code></a> object to use for registration.) – Ocean account that was used to purchase the asset.</p></li>
<li><p><strong>purchase_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – purchase id that was used to purchase the asset.</p></li>
<li><p><strong>payload</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – params required for the operation</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the operation was invoked</p>
</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="starfish.agent.SquidAgent.is_access_granted_for_asset">
<code class="sig-name descname">is_access_granted_for_asset</code><span class="sig-paren">(</span><em class="sig-param">asset</em>, <em class="sig-param">account</em>, <em class="sig-param">purchase_id=None</em><span class="sig-paren">)</span><a class="headerlink" href="#starfish.agent.SquidAgent.is_access_granted_for_asset" title="Permalink to this definition">¶</a></dt>
<dd><p>Check to see if the account and purchase_id have access to the assed data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>asset</strong> (<code class="xref py py-class docutils literal notranslate"><span class="pre">Asset</span></code> object) – Asset to check for access.</p></li>
<li><p><strong>account</strong> (<a class="reference internal" href="../account.html#starfish.account.Account" title="starfish.account.Account"><code class="xref py py-class docutils literal notranslate"><span class="pre">Account</span></code></a> object to use for registration.) – Ocean account to purchase the asset.</p></li>
<li><p><strong>purchase_id</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – Optional purchase id that was used to purchase the asset.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the asset can be accessed and consumed.</p>
</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="starfish.agent.SquidAgent.is_did_valid">
<em class="property">static </em><code class="sig-name descname">is_did_valid</code><span class="sig-paren">(</span><em class="sig-param">did</em><span class="sig-paren">)</span><a class="headerlink" href="#starfish.agent.SquidAgent.is_did_valid" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks to see if the DID string is a valid DID for this type of Asset.
This method only checks the syntax of the DID, it does not resolve the DID
to see if it is assigned to a valid Asset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>did</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a>) – DID string to check to see if it is in a valid format.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the DID is in the format ‘did:op:xxxxx’</p>
</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>boolean</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="starfish.agent.SquidAgent.is_supported_asset">
<em class="property">static </em><code class="sig-name descname">is_supported_asset</code><span class="sig-paren">(</span><em class="sig-param">asset</em><span class="sig-paren">)</span><a class="headerlink" href="#starfish.agent.SquidAgent.is_supported_asset" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the asset is a supported type.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>asset</strong> (<em>obj</em>) – Asset object to check to see if it is the correct type</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the type is supported</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="starfish.agent.SquidAgent.purchase_asset">
<code class="sig-name descname">purchase_asset</code><span class="sig-paren">(</span><em class="sig-param">listing</em>, <em class="sig-param">account</em><span class="sig-paren">)</span><a class="headerlink" href="#starfish.agent.SquidAgent.purchase_asset" title="Permalink to this definition">¶</a></dt>
<dd><p>Purchase an asset using it’s listing and an account.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>listing</strong> (<a class="reference internal" href="../listing/listing.html#starfish.listing.Listing" title="starfish.listing.Listing"><code class="xref py py-class docutils literal notranslate"><span class="pre">Listing</span></code></a>) – Listing to use for the purchase.</p></li>
<li><p><strong>account</strong> (<a class="reference internal" href="../account.html#starfish.account.Account" title="starfish.account.Account"><code class="xref py py-class docutils literal notranslate"><span class="pre">Account</span></code></a> object to use for registration.) – Ocean account to purchase the asset.</p></li>
</ul>
</dd>
<dt class="field-even">Raise</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">StarfishAssetNotFound</span></code> if the asset is not found in
aquarius or the DID of the asset is not on the network ( Block chain )</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="starfish.agent.SquidAgent.purchase_wait_for_completion">
<code class="sig-name descname">purchase_wait_for_completion</code><span class="sig-paren">(</span><em class="sig-param">asset</em>, <em class="sig-param">account</em>, <em class="sig-param">purchase_id</em>, <em class="sig-param">timeoutSeconds</em><span class="sig-paren">)</span><a class="headerlink" href="#starfish.agent.SquidAgent.purchase_wait_for_completion" title="Permalink to this definition">¶</a></dt>
<dd><p>Wait for completion of the purchase</p>
<p>TODO: issues here…
+ No method as yet to pass back paramaters and values during the purchase process
+ We assume that the following templates below will always be used.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>timeoutSeconds</strong> (<em>integer</em>) – Optional seconds to waif to purchase to complete. Default: 60 seconds</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if successfull or an error message if failed</p>
</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>string or boolean</p>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><p><strong>OceanPurchaseError</strong> – if the correct events are not received</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="starfish.agent.SquidAgent.register_asset">
<code class="sig-name descname">register_asset</code><span class="sig-paren">(</span><em class="sig-param">asset</em>, <em class="sig-param">listing_data</em>, <em class="sig-param">account</em><span class="sig-paren">)</span><a class="headerlink" href="#starfish.agent.SquidAgent.register_asset" title="Permalink to this definition">¶</a></dt>
<dd><p>Register a squid asset with the ocean network.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>asset</strong> (<a class="reference internal" href="../asset/data_asset.html#starfish.asset.DataAsset" title="starfish.asset.DataAsset"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataAsset</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">RemoteAsset</span></code> or <a class="reference internal" href="../asset/bundle_asset.html#starfish.asset.BundleAsset" title="starfish.asset.BundleAsset"><code class="xref py py-class docutils literal notranslate"><span class="pre">BundleAsset</span></code></a> object to register) – the asset to register, at the moment only a Asset can be used.</p></li>
<li><p><strong>listing_data</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) – data that is required for listing a registered asset</p></li>
<li><p><strong>account</strong> (<a class="reference internal" href="../account.html#starfish.account.Account" title="starfish.account.Account"><code class="xref py py-class docutils literal notranslate"><span class="pre">Account</span></code></a> object to use for registration.) – Ocean account to use to register this asset.</p></li>
<li><p><strong>options</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.8)"><em>dict</em></a>) – </p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>A new <a class="reference internal" href="../listing/listing.html#starfish.listing.Listing" title="starfish.listing.Listing"><code class="xref py py-class docutils literal notranslate"><span class="pre">Listing</span></code></a> object that has been registered, if failure then return None.</p>
</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p><a class="reference internal" href="../listing/listing.html#starfish.listing.Listing" title="starfish.listing.Listing"><code class="xref py py-class docutils literal notranslate"><span class="pre">Listing</span></code></a> class</p>
</dd>
</dl>
<p>At the moment only support <a class="reference internal" href="../asset/data_asset.html#starfish.asset.DataAsset" title="starfish.asset.DataAsset"><code class="xref py py-class docutils literal notranslate"><span class="pre">DataAsset</span></code></a> or <a class="reference internal" href="../asset/bundle_asset.html#starfish.asset.BundleAsset" title="starfish.asset.BundleAsset"><code class="xref py py-class docutils literal notranslate"><span class="pre">BundleAsset</span></code></a></p>
<p>For example:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="n">metadata</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="s1">&#39;my_metadata&#39;</span><span class="p">)</span>
<span class="c1"># get your publisher account</span>
<span class="n">account</span> <span class="o">=</span> <span class="n">ocean</span><span class="o">.</span><span class="n">get_account</span><span class="p">(</span><span class="s1">&#39;0x00bd138abd70e2f00903268f3db08f2d25677c9e&#39;</span><span class="p">)</span>
<span class="n">agent</span> <span class="o">=</span> <span class="n">SquidAgent</span><span class="p">(</span><span class="n">ocean</span><span class="p">)</span>
<span class="n">asset</span> <span class="o">=</span> <span class="n">DataAsset</span><span class="o">.</span><span class="n">create_from_file</span><span class="p">(</span><span class="s1">&#39;My test asset&#39;</span><span class="p">,</span> <span class="s1">&#39;Testfile.txt&#39;</span><span class="p">)</span>
<span class="n">listing</span> <span class="o">=</span> <span class="n">agent</span><span class="o">.</span><span class="n">register_asset</span><span class="p">(</span><span class="n">asset</span><span class="p">,</span> <span class="p">{</span><span class="s1">&#39;price&#39;</span><span class="p">:</span> <span class="mi">8</span><span class="p">},</span> <span class="n">account</span><span class="p">)</span>

<span class="k">if</span> <span class="n">listing</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;registered my listing asset for sale with the did </span><span class="si">{listing.did}</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="starfish.agent.SquidAgent.search_listings">
<code class="sig-name descname">search_listings</code><span class="sig-paren">(</span><em class="sig-param">text</em>, <em class="sig-param">sort=None</em>, <em class="sig-param">offset=100</em>, <em class="sig-param">page=1</em><span class="sig-paren">)</span><a class="headerlink" href="#starfish.agent.SquidAgent.search_listings" title="Permalink to this definition">¶</a></dt>
<dd><p>Search the off chain storage for an asset with the givien ‘text’</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dict text</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em>,</em>) – Test to search all metadata items for. If the field is a string
then the search will be a basic search, else a dict then a query will be performed</p></li>
<li><p><strong>sort</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.8)"><em>str</em></a><em> or </em><a class="reference external" href="https://docs.python.org/3/library/constants.html#None" title="(in Python v3.8)"><em>None</em></a>) – sort the results ( defaults: None, no sort).</p></li>
<li><p><strong>offset</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Return the result from with the maximum record count ( defaults: 100 ).</p></li>
<li><p><strong>page</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.8)"><em>int</em></a>) – Returns the page number based on the offset ( defaults: 1 ).</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>a list of assets objects found using the search.</p>
</dd>
<dt class="field-odd">Type</dt>
<dd class="field-odd"><p>list of DID strings</p>
</dd>
</dl>
<p>For example:</p>
<div class="highlight-python3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># return the 300 -&gt; 399 records in the search for the text &#39;weather&#39; in the metadata.</span>
<span class="n">my_result</span> <span class="o">=</span> <span class="n">agent</span><span class="o">.</span><span class="n">search_registered_assets</span><span class="p">(</span><span class="s1">&#39;weather&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="starfish.agent.SquidAgent.start_agreement_events_monitor">
<code class="sig-name descname">start_agreement_events_monitor</code><span class="sig-paren">(</span><em class="sig-param">account</em>, <em class="sig-param">callback=None</em><span class="sig-paren">)</span><a class="headerlink" href="#starfish.agent.SquidAgent.start_agreement_events_monitor" title="Permalink to this definition">¶</a></dt>
<dd><p>The provider or publisher needs to watch the events on the block chain, to
then setup the agreement contracts on the block chain when the consume
first starts to make the initial consume request ( payment to escrow ).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>account</strong> (<a class="reference internal" href="../account.html#starfish.account.Account" title="starfish.account.Account"><code class="xref py py-class docutils literal notranslate"><span class="pre">Account</span></code></a>) – Account to watch for payment events for the provider of the asset</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="starfish.agent.SquidAgent.stop_agreement_events_monitor">
<code class="sig-name descname">stop_agreement_events_monitor</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#starfish.agent.SquidAgent.stop_agreement_events_monitor" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="starfish.agent.SquidAgent.validate_asset">
<code class="sig-name descname">validate_asset</code><span class="sig-paren">(</span><em class="sig-param">asset</em><span class="sig-paren">)</span><a class="headerlink" href="#starfish.agent.SquidAgent.validate_asset" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate an asset</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>asset</strong> – Asset to validate.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>True if the asset is valid</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="remote_agent.html" class="btn btn-neutral float-right" title="Remote Agent class" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="memory_agent.html" class="btn btn-neutral float-left" title="Memory Agent class" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright starfish-py contributors

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>